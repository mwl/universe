{
  "id": "/{{humio.name}}",
  "instances": {{humio.instances}},
  "cpus": {{humio.cpus}},
  "mem": {{humio.mem}},
  "cmd": "filebeat-5.5.2-linux-x86_64/filebeat -e -path.data={{humio.dataDir}} -c filebeat-5.5.2-linux-x86_64/filebeat.yml \\\n-E 'filebeat.prospectors=[{paths: [\"/var/lib/mesos/slave/slaves/*/frameworks/*/executors/*/runs/latest/stdout\",\"/var/lib/mesos/slave/slaves/*/frameworks/*/executors/*/runs/latest/stderr\",\"/var/log/mesos/*.log\",\"/var/log/dcos/dcos.log\"]}]' \\\n-E 'output.elasticsearch.hosts=[\"{{humio.url}}/api/v1/dataspaces/{{humio.dataspace}}/ingest/elasticsearch\"]' \\\n-E 'output.elasticsearch.username={{humio.ingestToken}}' \\\n-E 'output.elasticsearch.compression_level=5' \\\n-E 'output.elasticsearch.bulk_max_size=200'",
  "constraints": [
    [
      "hostname", "UNIQUE"
    ]
  ],
  "uris": [
    "{{resource.assets.uris.filebeat-tar-gz}}"
  ],
  "upgradeStrategy": {
    "minimumHealthCapacity": 0,
    "maximumOverCapacity": 0
  },
  "healthChecks": [
    {
      "protocol": "COMMAND",
      "gracePeriodSeconds": 15,
      "intervalSeconds": 5,
      "timeoutSeconds": 1,
      "command": {
        "value": "test `find {{humio.dataDir}}/registry -mmin -1`"
      }
    }
  ]
}